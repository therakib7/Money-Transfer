webpackJsonp([35],{287:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={components:{"date-time-picker":function(){return s.e(59).then(s.bind(null,240))}},data:function(){return{dateOptions:this.$store.state.dateOptions,formType:!1,sim:{terminal_id:null,providers:[{number:null,provider_id:"",balance_code:""}],type:"agent"},simConst:{terminal_id:null,providers:[{number:null,provider_id:"",balance_code:""}],type:"agent"},simSearch:{date_from:"",date_to:"",order_by:""},sims:{},providers:[],perPage:this.$route.query.per_page,perPageOptions:this.$store.state.perPageOptions,selected:[],selectAll:!1,noData:"",preloader:!0}},watch:{perPage:function(t){var e=this.$route.query.page;this.$router.push({path:document.location.search,query:{page:e,per_page:t}}),this.getLists()}},created:function(){this.getLists();var t=this.$route.query.per_page;this.perPageOptions.find(function(e){return e.value==t})||this.perPageOptions.splice(0,0,{text:t,value:t})},mounted:function(){this.$root.popupModal()},updated:function(){this.$root.dropdownModal()},methods:{select:function(){if(this.selected=[],!this.selectAll)for(var t in this.sims.data)this.selected.push(this.sims.data[t].id)},addNumber:function(t){this.sim.providers.splice(t+1,0,{number:null,provider_id:"",balance_code:""})},removeNumber:function(t){1==this.sim.providers.length?alert(this.$store.state.needOne):this.sim.providers.splice(t,1)},numberChange:function(t){var e=this.sim.providers[t].number;if(e.length>=3){var s=e.substring(0,3),a=this.providers.filter(function(t){if(t.prefix){if(!(t.prefix.indexOf(":")>-1))return s.indexOf(t.prefix)>-1;var e=t.prefix.split(":"),a=!0,i=!1,r=void 0;try{for(var o,n=e[Symbol.iterator]();!(a=(o=n.next()).done);a=!0){var l=o.value;if(s==l)return!0}}catch(t){i=!0,r=t}finally{try{!a&&n.return&&n.return()}finally{if(i)throw r}}}});a.length&&(this.sim.providers[t].provider_id=a[0])}else this.sim.providers[t].provider_id=""},dataSearch:function(){var t=this.simSearch,e={};for(var s in t.date_from=t.date_from?t.date_from.toString():"",t.date_to=t.date_to?t.date_to.toString():"",t)t[s]?e[s]="sim_id"!=s?t[s]:t[s].id:this.$route.query[s]&&(e[s]="");this.$router.push({path:document.location.search,query:e}),this.getLists()},getLists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=this,a=this.$route.query.per_page,i=e?t:this.$route.query.page;e&&this.$router.push({path:document.location.search,query:{page:i,per_page:a}});var r=this.$route.query,o=Object.keys(r).map(function(t){return t+"="+r[t]}).join("&");axios.get("/api/v1/mt/sims?"+o).then(function(t){s.preloader=!1,s.sims=t.data.sims,s.providers=t.data.providers,0==s.sims.data.length?s.noData=s.$store.state.noData:s.noData=""}).catch(function(t){s.$store.commit("errorMessages",t)})},newForm:function(){this.formType=!0,this.sim=this.simConst},saveForm:function(){var t=this;document.getElementById("createModal").style.display="none";var e=this,s=e.sim;this.formType?axios.post("/api/v1/mt/sims",s).then(function(s){t.sim=t.simConst,e.$store.commit("submitMsg","add"),e.getLists()}).catch(function(t){e.$store.commit("errorMessages",t)}):axios.patch("/api/v1/mt/sims/"+s.id,s).then(function(t){e.$store.commit("submitMsg","update"),e.getLists()}).catch(function(t){e.$store.commit("errorMessages",t)})},editForm:function(t){this.formType=!1,this.sim=t},deleteEntry:function(t,e){var s=this;confirm(s.$store.state.confirmDel)&&axios.delete("/api/v1/mt/sims/"+t).then(function(t){s.sims.data.splice(e,1),s.$store.commit("submitMsg","delete")}).catch(function(t){s.$store.commit("errorMessages",t)})},deleteSelected:function(){var t=this;if(0!=t.selected.length){if(confirm(t.$store.state.confirmDel)){var e=this.selected.toString();axios.delete("/api/v1/mt/sims/"+e).then(function(e){t.$store.commit("submitMsg","selectedDelete"),t.selectAll=!1,t.selected=[],t.getLists()}).catch(function(e){t.$store.commit("errorMessages",e)})}}else t.$store.commit("noSelectedMsg")}}}},288:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"component"},[s("div",{staticClass:"component-heading clearfix"},[s("h2",{staticClass:"heading float-left"},[t._v("\n           Sim Lists\n        ")]),t._v(" "),s("back-forward")],1),t._v(" "),s("div",{staticClass:"component-body"},[s("div",{directives:[{name:"can",rawName:"v-can",value:"sim-create",expression:"'sim-create'"}],staticClass:"modal fade",attrs:{id:"createModal"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v("  "+t._s(t.formType?"New":"Update")+" Sim")]),t._v(" "),t._m(0)]),t._v(" "),s("form",{on:{submit:function(e){return e.preventDefault(),t.saveForm()}}},[s("div",{staticClass:"modal-body"},[s("div",{staticClass:"form-row"},[s("div",{staticClass:"col-md-12 mb-3 outline-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.sim.terminal_id,expression:"sim.terminal_id"}],staticClass:"form-control outline",attrs:{placeholder:" ",type:"number",id:"terminal_id"},domProps:{value:t.sim.terminal_id},on:{input:function(e){e.target.composing||t.$set(t.sim,"terminal_id",e.target.value)}}}),t._v(" "),s("label",{attrs:{for:"terminal_id"}},[t._v("Terminal ID")])]),t._v(" "),s("div",{staticClass:"mt-number-list"},t._l(t.sim.providers,function(e,a){return s("div",{staticClass:"mt-numbers"},[s("div",{staticClass:"mt-title"},[t._v("\n                                            Provider: "+t._s(a+1)+"\n                                        ")]),t._v(" "),s("div",{staticClass:"mt-control"},[s("span",{staticClass:"btn btn-primary btn-sm",on:{click:function(e){return t.addNumber(a)}}},[s("i",{staticClass:"icon-plus"})]),t._v(" "),s("span",{staticClass:"btn btn-danger btn-sm",on:{click:function(e){return t.removeNumber(a)}}},[s("i",{staticClass:"icon-minus"})])]),t._v(" "),s("div",{staticClass:"form-row mt-4"},[s("div",{staticClass:"col-md-12 mb-3 outline-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.number,expression:"provider.number"}],staticClass:"form-control outline",attrs:{placeholder:" ",type:"text",id:"sim_number"+a},domProps:{value:e.number},on:{keyup:function(e){return t.numberChange(a)},input:function(s){s.target.composing||t.$set(e,"number",s.target.value)}}}),t._v(" "),s("label",{attrs:{for:"sim_number"+a}},[t._v("Sim Number")])]),t._v(" "),s("div",{staticClass:"col-12 mb-3"},[s("label",{staticClass:"o-s-l"},[t._v("Provider")]),t._v(" "),s("multiselect",{attrs:{"allow-empty":!1,"deselect-label":"","select-label":"",options:t.providers,"preserve-search":!0,label:"name","track-by":"name","preselect-first":!1},scopedSlots:t._u([{key:"singleLabel",fn:function(e){return[e.option.logo_small_src?[s("img",{staticClass:"option__image",attrs:{src:"/uploads/imgs/"+e.option.logo_small_src.resized_name,alt:e.option.name}})]:t._e(),t._v(" "),s("span",{staticClass:"option__title"},[t._v(" "+t._s(e.option.name))])]}},{key:"option",fn:function(e){return[e.option.logo_small_src?[s("img",{staticClass:"option__image",attrs:{src:"/uploads/imgs/"+e.option.logo_small_src.resized_name,alt:e.option.name}})]:t._e(),t._v(" "),s("span",{staticClass:"option__title"},[t._v(" "+t._s(e.option.name))])]}}],null,!0),model:{value:e.provider_id,callback:function(s){t.$set(e,"provider_id",s)},expression:"provider.provider_id"}})],1),t._v(" "),s("div",{staticClass:"col-md-12 mb-3 outline-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.balance_code,expression:"provider.balance_code"}],staticClass:"form-control outline",attrs:{placeholder:" ",type:"text",id:"balance_code"+a},domProps:{value:e.balance_code},on:{input:function(s){s.target.composing||t.$set(e,"balance_code",s.target.value)}}}),t._v(" "),s("label",{attrs:{for:"balance_code"+a}},[t._v("Live Balance Code")])])])])}),0),t._v(" "),s("div",{staticClass:"col-md-12 mb-3 mt-3"},[s("label",{staticClass:"o-s-l"},[t._v("Select Type")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.sim.type,expression:"sim.type"}],staticClass:"form-control",attrs:{id:"type"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.sim,"type",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"agent"}},[t._v("Agent")]),t._v(" "),s("option",{attrs:{value:"dealer"}},[t._v("Dealer")])])])])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("\n                            "+t._s(t.formType?"Create":"Update")+"\n                            ")])])])])])]),t._v(" "),s("div",{staticClass:"modal right fade",attrs:{id:"dataSearch"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[t._m(1),t._v(" "),s("form",{on:{submit:function(e){return e.preventDefault(),t.dataSearch()}}},[s("div",{staticClass:"modal-body"},[s("div",{staticClass:"form-row"},[s("div",{staticClass:"col-12 mb-3"},[s("label",{staticClass:"o-s-l"},[t._v("Show")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.perPage,expression:"perPage"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.perPage=e.target.multiple?s:s[0]}}},t._l(t.perPageOptions,function(e){return s("option",{domProps:{value:e.value}},[t._v("\n                                            "+t._s(e.text)+"\n                                        ")])}),0)]),t._v(" "),s("div",{staticClass:"col-12 mb-3"},[s("date-time-picker",{attrs:{placeholder:"Date From"},model:{value:t.simSearch.date_from,callback:function(e){t.$set(t.simSearch,"date_from",e)},expression:"simSearch.date_from"}})],1),t._v(" "),s("div",{staticClass:"col-12 mb-3"},[s("date-time-picker",{attrs:{placeholder:"Date To"},scopedSlots:t._u([{key:"choose-date",fn:function(){return[t._v(t._s(t.$t("date_to")))]},proxy:!0}]),model:{value:t.simSearch.date_to,callback:function(e){t.$set(t.simSearch,"date_to",e)},expression:"simSearch.date_to"}})],1),t._v(" "),s("div",{staticClass:"col-12 mb-3"},[s("label",{staticClass:"o-s-l"},[t._v("Order By")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.simSearch.order_by,expression:"simSearch.order_by"}],staticClass:"form-control",attrs:{id:"search-order-by"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.simSearch,"order_by",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""}},[t._v("Newer First")]),t._v(" "),s("option",{attrs:{value:"1"}},[t._v("Newer Last")])])]),t._v(" "),t._m(2)])])])])])]),t._v(" "),s("div",{staticClass:"table-actions"},[s("button",{directives:[{name:"can",rawName:"v-can",value:"sim-create",expression:"'sim-create'"}],staticClass:"btn btn-sm bg-success",attrs:{type:"button","data-toggle":"modal","data-target":"#createModal"},on:{click:function(e){return t.newForm()}}},[s("i",{staticClass:"icon-plus-squared"}),t._v(" Sim\n            ")]),t._v(" "),t.selected.length?s("button",{directives:[{name:"can",rawName:"v-can",value:"sim-delete",expression:"'sim-delete'"}],staticClass:"btn btn-sm btn-danger ",on:{click:function(e){return t.deleteSelected()}}},[s("i",{staticClass:"icon-trash-empty"}),t._v(" Delete Selected")]):t._e(),t._v(" "),t._m(3)]),t._v(" "),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-striped bg-white"},[s("thead",[s("tr",[s("th",{staticStyle:{width:"20px"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectAll,expression:"selectAll"}],attrs:{type:"checkbox",id:"check-all"},domProps:{checked:Array.isArray(t.selectAll)?t._i(t.selectAll,null)>-1:t.selectAll},on:{click:t.select,change:function(e){var s=t.selectAll,a=e.target,i=!!a.checked;if(Array.isArray(s)){var r=t._i(s,null);a.checked?r<0&&(t.selectAll=s.concat([null])):r>-1&&(t.selectAll=s.slice(0,r).concat(s.slice(r+1)))}else t.selectAll=i}}})]),t._v(" "),t._m(4),t._v(" "),s("th",[t._v("Number & Provider")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Actions")])])]),t._v(" "),s("tbody",[t.preloader?s("tr",{staticStyle:{background:"none"}},[s("td",{attrs:{colspan:"5"}},[s("preloader")],1)]):t._e(),t._v(" "),t._l(t.sims.data,function(e,a){return s("tr",[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],attrs:{type:"checkbox",id:"checkbox-id-"+e.id},domProps:{value:e.id,checked:Array.isArray(t.selected)?t._i(t.selected,e.id)>-1:t.selected},on:{change:function(s){var a=t.selected,i=s.target,r=!!i.checked;if(Array.isArray(a)){var o=e.id,n=t._i(a,o);i.checked?n<0&&(t.selected=a.concat([o])):n>-1&&(t.selected=a.slice(0,n).concat(a.slice(n+1)))}else t.selected=r}}})]),t._v(" "),s("td",[s("label",{attrs:{for:"checkbox-id-"+e.id}},[t._v(t._s(e.terminal_id))])]),t._v(" "),s("td",{staticClass:"taxonomies"},[e.providers?t._l(e.providers,function(e){return s("span",[t._v(" "+t._s(e.number)+" - "+t._s(e.provider_id.name))])}):t._e()],2),t._v(" "),s("td",{staticClass:"text-capitalize"},[t._v(t._s(e.type))]),t._v(" "),s("td",[s("div",{staticClass:"dropdown action-items"},[t._m(5,!0),t._v(" "),s("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"actionItemButtons"}},[s("a",{directives:[{name:"can",rawName:"v-can",value:"sim-edit",expression:"'sim-edit'"}],staticClass:"dropdown-item",attrs:{href:"#","data-toggle":"modal","data-target":"#createModal"},on:{click:function(s){return s.preventDefault(),t.editForm(e)}}},[t._v("\n                                   Edit \n                                ")]),t._v(" "),s("a",{directives:[{name:"can",rawName:"v-can",value:"sim-delete",expression:"'sim-delete'"}],staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.deleteEntry(e.id,a)}}},[t._v("\n                                    Delete\n                                ")])])])])])}),t._v(" "),t.noData?[s("tr",{staticClass:"bg-white",domProps:{innerHTML:t._s(t.noData)}})]:t._e()],2),t._v(" "),s("tfoot",[s("tr",[s("th",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectAll,expression:"selectAll"}],attrs:{type:"checkbox",id:"check-all-bottom"},domProps:{checked:Array.isArray(t.selectAll)?t._i(t.selectAll,null)>-1:t.selectAll},on:{click:t.select,change:function(e){var s=t.selectAll,a=e.target,i=!!a.checked;if(Array.isArray(s)){var r=t._i(s,null);a.checked?r<0&&(t.selectAll=s.concat([null])):r>-1&&(t.selectAll=s.slice(0,r).concat(s.slice(r+1)))}else t.selectAll=i}}})]),t._v(" "),t._m(6),t._v(" "),s("th",[t._v("Number & Provider")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Actions")])])])])]),t._v(" "),s("div",{staticClass:"table-actions"},[s("pagination",{attrs:{data:t.sims,limit:2},on:{"pagination-change-page":t.getLists}})],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[this._v("Search")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-12 mb-3"},[e("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit"}},[this._v("Search")]),this._v(" "),e("button",{staticClass:"btn btn-dark float-right btn-sm",attrs:{type:"reset"}},[this._v("Reset")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn btn-sm btn-info float-right",attrs:{type:"button","data-toggle":"modal","data-target":"#dataSearch"}},[e("i",{staticClass:"icon-search"}),this._v(" "),e("span",{staticClass:"d-none d-sm-inline"},[this._v("Search")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",[e("label",{attrs:{for:"check-all"}},[this._v("Terminal ID")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn btn-default btn-sm dropdown-toggle",attrs:{type:"button",id:"actionItemButtons","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e("i",{staticClass:"icon-ellipsis"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("th",[e("label",{attrs:{for:"check-all-bottom"}},[this._v("Terminal ID")])])}]}},511:function(t,e,s){var a=s(16)(s(287),s(288),!1,null,null,null);t.exports=a.exports}});