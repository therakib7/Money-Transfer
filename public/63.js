webpackJsonp([63],{251:function(t,e,s){var n=s(16)(s(254),s(255),!1,function(t){s(252)},"data-v-b716e5f0",null);t.exports=n.exports},252:function(t,e,s){var n=s(253);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);s(242)("08626d3c",n,!0,{})},253:function(t,e,s){(t.exports=s(158)(!1)).push([t.i,'.address-suggestion ul li span[data-v-b716e5f0]:not(:first-child):before,.address-warning span[data-v-b716e5f0]:not(:first-child):before{padding-right:5px!important;content:", "}.address-suggestion ul li span[data-v-b716e5f0]:last-child:after,.address-warning span[data-v-b716e5f0]:last-child:after{content:"."}',""])},254:function(t,e,s){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}e.default=(i(n={props:{location_id:{type:Number,default:null},warning:{type:Boolean,default:!0}},data:function(){return{id:null,get_address:null,address:null,address_id:null,country_id:{id:19,name:"Bangladesh"},country_is_loading:!1,countries:[],country_stages:[],address_suggestion:[],address_warning:[]}},watch:{},created:function(){this.getLocation()},mounted:function(){this.id=this._uid}},"mounted",function(){this.$root.popupModal()}),i(n,"updated",function(){this.$root.dropdownModal()}),i(n,"methods",{getParentAddress:function(t){t.name?this.get_address.name.push(t.name):this.get_address.name.push(t.native_name),this.get_address.country_id=t,null!=t.parent&&this.getParentAddress(t.parent)},addressLabel:function(t){var e=t.name,s=void 0===e?"":e,n=t.native_name;return s||(void 0===n?"":n)},getAddress:function(){var t=this;t.location_id&&axios.get("/api/v1/geo/locations?location_id="+t.location_id).then(function(e){if(e.data){var s=e.data;t.get_address=[],t.get_address={location:null,country_id:null,name:[]},t.get_address.country_id=s,t.get_address.location={id:s.id,stage_id:s.stage_id},s.name?t.get_address.name.push(s.name):t.get_address.name.push(s.native_name),null!=s.parent&&t.getParentAddress(s.parent),t.address=t.get_address.name.join(", "),t.address_id=t.get_address.location.id;var n=t.get_address.location.stage_id;t.country_id=t.get_address.country_id,axios.get("/api/v1/geo/locations?country=stage&country_id="+t.get_address.country_id.id+"&parent_id="+t.get_address.location.id+"&stage_id="+n).then(function(e){var s=e.data.country_stages;if(s.length)for(var a in t.address_warning=[],s)s[a].stage>n?t.address_warning.push({id:s[a].id,name:s[a].name,stage:s[a].stage,stageConst:s[a].stage,location:e.data.suggestion_location,is_loading:!1}):t.address_warning.push({id:s[a].id,name:s[a].name,stage:s[a].stage,stageConst:s[a].stage,location:[],is_loading:!1})})}})},getLocation:function(){var t=this;setTimeout(function(){t.getAddress()},1e3)},get_location_id:function(){var t=null;if(this.address_warning.length){var e=this.address_warning.slice(0).reverse();for(var s in e)if("object"===a(e[s].stage)){t=e[s].stage.id;break}t||(t=this.address_id)}else t=this.address_id;this.$emit("input",t)},searchCountry:function(t){var e=this,s=this;this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(function(){t.length<4||(s.country_is_loading=!0,axios.get("/api/v1/geo/locations?address="+t+"&country=only").then(function(t){s.countries=t.data,s.country_is_loading=!1}).catch(function(t){e.$store.commit("errorMessages",t)}))},600)},selectAddress:function(t){var e=this;for(var s in e.address=t.name.join(", "),e.address_suggestion=[],e.address_warning=[],e.country_stages)t.location.stage_id<e.country_stages[s].stage&&e.address_warning.push({id:e.country_stages[s].id,name:e.country_stages[s].name,stage:e.country_stages[s].stage,stageConst:e.country_stages[s].stage,location:[],is_loading:!1});var n=e.country_id.id,a=t.location.id;e.address_id=a,this.get_location_id(),axios.get("/api/v1/geo/locations?country_id="+n+"&parent_id="+a).then(function(s){var n=t.location.stage_id+1;for(var a in e.address_warning)if(e.address_warning[a].stage==n){e.address_warning[a].location=s.data;break}}).catch(function(t){e.$store.commit("errorMessages",t)})},parentAddress:function(t,e){t.name?this.address_suggestion[e].name.push(t.name):this.address_suggestion[e].name.push(t.native_name),null!=t.parent&&this.parentAddress(t.parent,e)},locationChanged:function(t,e){var s=this,n=s.country_id.id,a=e.id,i=t+1;for(var o in s.address_warning)if(s.address_warning[o].stage==i){s.address_warning[o].is_loading=!0;break}this.get_location_id(),axios.get("/api/v1/geo/locations?country_id="+n+"&parent_id="+a).then(function(t){for(var e in s.address_warning)if(s.address_warning[e].stage==i){s.address_warning[e].location=t.data,s.address_warning[e].is_loading=!1;break}}).catch(function(t){s.$store.commit("errorMessages",t)})},addressChange:function(){var t=this,e=this,s=e.address;this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(function(){if(s.length<4)e.address_suggestion=[];else{var n=e.country_id.id;axios.get("/api/v1/geo/locations?address="+s+"&country_id="+n).then(function(t){var s=t.data.suggestion_location;for(var n in e.country_stages=t.data.country_stages,e.address_suggestion=[],e.address_warning=[],s)e.address_suggestion[n]={location:null,name:[]},e.address_suggestion[n].location={id:s[n].id,stage_id:s[n].stage_id},s[n].name?e.address_suggestion[n].name.push(s[n].name):e.address_suggestion[n].name.push(s[n].native_name),null!=s[n].parent&&e.parentAddress(s[n].parent,n)}).catch(function(e){t.$store.commit("errorMessages",e)})}},600)}}),i(n,"i18n",{messages:{en:{country:"Country",location:"Location"},bn:{country:"দেশ",location:"স্থান"}}}),n)},255:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-row"},[s("div",{staticClass:"col-12 mb-3"},[s("label",{staticClass:"o-s-l"},[t._v(t._s(t.$t("country")))]),t._v(" "),s("multiselect",{attrs:{"allow-empty":!1,"deselect-label":"","select-label":"",options:t.countries,"preserve-search":!0,label:"name",loading:t.country_is_loading,"track-by":"name","preselect-first":!1},on:{"search-change":t.searchCountry},scopedSlots:t._u([{key:"tag",fn:function(e){return[s("span",[t._v(t._s(e.option.name))]),t._v(" "),s("span",{on:{click:function(t){return e.remove(e.option)}}},[t._v("x")])]}}]),model:{value:t.country_id,callback:function(e){t.country_id=e},expression:"country_id"}})],1),t._v(" "),s("div",{staticClass:"col-12 outline-group mb-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"form-control outline",attrs:{placeholder:" ",type:"text",id:"address-"+t.id},domProps:{value:t.address},on:{keyup:function(e){return t.addressChange()},input:function(e){e.target.composing||(t.address=e.target.value)}}}),t._v(" "),s("label",{attrs:{for:"address-"+t.id}},[t._v(t._s(t.$t("location")))]),t._v(" "),s("div",{staticClass:"address-suggestion mt-2"},[s("ul",{staticClass:"list-group"},t._l(t.address_suggestion,function(e,n){return s("li",{staticClass:"list-group-item cursor-pointer",on:{click:function(s){return t.selectAddress(e)}}},t._l(e.name,function(e){return s("span",[t._v(t._s(e))])}),0)}),0)]),t._v(" "),t.address_warning.length&&t.warning?s("p",{staticClass:"text-info address-warning"},[t._v("\n            Please Select "),t._l(t.address_warning,function(e){return s("span",[t._v(t._s(e.name))])})],2):s("p"),t._v(" "),s("div",{staticClass:"form-row"},[t._l(t.address_warning,function(e){return[s("div",{staticClass:"col-12 mb-3"},[s("label",{staticClass:"o-s-l"},[t._v(t._s(e.name))]),t._v(" "),s("multiselect",{attrs:{"deselect-label":"","custom-label":t.addressLabel,"select-label":"",options:e.location,loading:e.is_loading,"preserve-search":!0,label:"name","track-by":"name","preselect-first":!1},on:{input:function(s){return t.locationChanged(e.stageConst,e.stage)}},scopedSlots:t._u([{key:"tag",fn:function(e){return[s("span",[t._v(t._s(e.option.name))]),t._v(" "),s("span",{on:{click:function(t){return e.remove(e.option)}}},[t._v("x")])]}}],null,!0),model:{value:e.stage,callback:function(s){t.$set(e,"stage",s)},expression:"address.stage"}})],1)]})],2)])])},staticRenderFns:[]}}});