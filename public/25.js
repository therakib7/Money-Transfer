webpackJsonp([25],{266:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={components:{"date-time-picker":function(){return a.e(59).then(a.bind(null,240))}},data:function(){return{dateOptions:this.$store.state.dateOptions,userchangehistoriesSearch:{user_id:"",old:"",new:"",date_from:"",date_to:"",order_by:""},accounts:[],userchangehistories:{},isLoading:!1,perPage:this.$route.query.per_page,perPageOptions:this.$store.state.perPageOptions,noData:"",preloader:!0}},watch:{perPage:function(e){var t=this.$route.query.page;this.$router.push({path:document.location.search,query:{page:t,per_page:e}}),this.getLists()}},created:function(){this.getLists();var e=this.$route.query.per_page;this.perPageOptions.find(function(t){return t.value==e})||this.perPageOptions.splice(0,0,{text:e,value:e})},mounted:function(){this.$root.popupModal()},updated:function(){this.$root.dropdownModal()},methods:{customLabel:function(e){var t=e.name;return void 0===t?"":t},asyncFind:function(e){var t=this;this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(function(){e.length<4||(t.isLoading=!0,axios.get("/api/v1/ac/accounts?title="+e).then(function(e){t.accounts=e.data.users,t.isLoading=!1}).catch(function(e){t.$store.commit("errorMessages",e)}))},600)},dataSearch:function(){var e=this.userchangehistoriesSearch,t={};for(var a in e.date_from=e.date_from?e.date_from.toString():"",e.date_to=e.date_to?e.date_to.toString():"",e)e[a]?t[a]="user_id"!=a?e[a]:e[a].id:this.$route.query[a]&&(t[a]="");this.$router.push({path:document.location.search,query:t}),this.getLists()},user:function(e){return e.username?e.username:e.mobile?e.mobile:e.email},keyTitle:function(e){return"nid"==e?"NID":"birth_crt"==e?"Birth CRT":"passport"==e?"Passport":void 0},getLists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this,s=this.$route.query.per_page,r=t?e:this.$route.query.page;t&&this.$router.push({path:document.location.search,query:{page:r,per_page:s}});var i=this.$route.query,o=Object.keys(i).map(function(e){return e+"="+i[e]}).join("&");axios.get("/api/v1/userchangehistories?"+o).then(function(e){a.preloader=!1,a.userchangehistories=e.data.userchangehistories,a.refferalUrl=e.data.ref_url,0==a.userchangehistories.data.length?a.noData=a.$store.state.noData:a.noData=""}).catch(function(e){a.$store.commit("errorMessages",e)})}}}},267:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"component"},[a("div",{staticClass:"component-heading clearfix"},[a("h2",{staticClass:"heading float-left"},[e._v("\n           User Change History Lists\n        ")]),e._v(" "),a("back-forward")],1),e._v(" "),a("div",{staticClass:"component-body"},[a("div",{staticClass:"modal right fade",attrs:{id:"dataSearch"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[e._m(0),e._v(" "),a("form",{on:{submit:function(t){return t.preventDefault(),e.dataSearch()}}},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"col-12 mb-3"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.perPage,expression:"perPage"}],staticClass:"form-control",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.perPage=t.target.multiple?a:a[0]}}},e._l(e.perPageOptions,function(t){return a("option",{domProps:{value:t.value}},[e._v("\n                                            "+e._s(t.text)+"\n                                        ")])}),0)]),e._v(" "),a("div",{staticClass:"col-12 mb-3"},[a("multiselect",{attrs:{options:e.accounts,"custom-label":e.customLabel,"preserve-search":!0,placeholder:"Search User",selectLabel:"",loading:e.isLoading,deselectLabel:"","internal-search":!1,searchable:!0,label:"name","track-by":"name","preselect-first":!1},on:{"search-change":e.asyncFind},scopedSlots:e._u([{key:"tag",fn:function(t){return[a("span",[e._v(e._s(t.option.name))]),e._v(" "),a("span",{on:{click:function(e){return t.remove(t.option)}}},[e._v("x")])]}}]),model:{value:e.userchangehistoriesSearch.user_id,callback:function(t){e.$set(e.userchangehistoriesSearch,"user_id",t)},expression:"userchangehistoriesSearch.user_id"}}),e._v(" "),a("small",[e._v("Search by mobile, email or username")])],1),e._v(" "),a("div",{staticClass:"col-12 mb-3 outline-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.userchangehistoriesSearch.old,expression:"userchangehistoriesSearch.old"}],staticClass:"form-control outline",attrs:{placeholder:" ",type:"text",id:"search-old"},domProps:{value:e.userchangehistoriesSearch.old},on:{input:function(t){t.target.composing||e.$set(e.userchangehistoriesSearch,"old",t.target.value)}}}),e._v(" "),a("label",{attrs:{for:"search-old"}},[e._v("Old Value")])]),e._v(" "),a("div",{staticClass:"col-12 mb-3 outline-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.userchangehistoriesSearch.new,expression:"userchangehistoriesSearch.new"}],staticClass:"form-control outline",attrs:{placeholder:" ",type:"text",id:"search-new"},domProps:{value:e.userchangehistoriesSearch.new},on:{input:function(t){t.target.composing||e.$set(e.userchangehistoriesSearch,"new",t.target.value)}}}),e._v(" "),a("label",{attrs:{for:"search-new"}},[e._v("New Value")])]),e._v(" "),a("div",{staticClass:"col-12 mb-3"},[a("date-time-picker",{attrs:{placeholder:"Date From"},model:{value:e.userchangehistoriesSearch.date_from,callback:function(t){e.$set(e.userchangehistoriesSearch,"date_from",t)},expression:"userchangehistoriesSearch.date_from"}})],1),e._v(" "),a("div",{staticClass:"col-12 mb-3"},[a("date-time-picker",{attrs:{placeholder:"Date To"},scopedSlots:e._u([{key:"choose-date",fn:function(){return[e._v(e._s(e.$t("date_to")))]},proxy:!0}]),model:{value:e.userchangehistoriesSearch.date_to,callback:function(t){e.$set(e.userchangehistoriesSearch,"date_to",t)},expression:"userchangehistoriesSearch.date_to"}})],1),e._v(" "),a("div",{staticClass:"col-12 mb-3"},[a("label",{staticClass:"o-s-l"},[e._v("Order By")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.userchangehistoriesSearch.order_by,expression:"userchangehistoriesSearch.order_by"}],staticClass:"form-control",attrs:{id:"search-order-by"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.userchangehistoriesSearch,"order_by",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("Newer First")]),e._v(" "),a("option",{attrs:{value:"1"}},[e._v("Newer Last")])])]),e._v(" "),e._m(1)])])])])])]),e._v(" "),e._m(2),e._v(" "),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped bg-white"},[e._m(3),e._v(" "),a("tbody",[e.preloader?a("tr",{staticStyle:{background:"none"}},[a("td",{attrs:{colspan:"5"}},[a("preloader")],1)]):e._e(),e._v(" "),e._l(e.userchangehistories.data,function(t,s){return a("tr",[a("td",[e._v(e._s(e.user(t.user)))]),e._v(" "),a("td",[e._v(e._s(t.user.name))]),e._v(" "),a("td",[e._v(e._s(e.keyTitle(t.key)))]),e._v(" "),a("td",[e._v(e._s(t.old))]),e._v(" "),a("td",[e._v(e._s(t.new))]),e._v(" "),a("td",[e._v(e._s(e._f("moment")(t.created_at,"DD-MM-YYYY, h:mm a")))])])}),e._v(" "),e.noData?[a("tr",{staticClass:"bg-white",domProps:{innerHTML:e._s(e.noData)}})]:e._e()],2),e._v(" "),e._m(4)])]),e._v(" "),a("div",{staticClass:"table-actions"},[a("pagination",{attrs:{data:e.userchangehistories,limit:2},on:{"pagination-change-page":e.getLists}})],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title"},[this._v("Search")]),this._v(" "),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("Ã—")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-12 mb-3"},[t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit"}},[this._v("Search")]),this._v(" "),t("button",{staticClass:"btn btn-dark float-right btn-sm",attrs:{type:"reset"}},[this._v("Reset")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"table-actions"},[t("button",{staticClass:"btn btn-sm btn-info float-right",attrs:{type:"button","data-toggle":"modal","data-target":"#dataSearch"}},[t("i",{staticClass:"icon-search"}),this._v(" "),t("span",{staticClass:"d-none d-sm-inline"},[this._v("Search")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("User")]),e._v(" "),a("th",[e._v("Name")]),e._v(" "),a("th",[e._v("Key")]),e._v(" "),a("th",[e._v("Old Value")]),e._v(" "),a("th",[e._v("New Value")]),e._v(" "),a("th",[e._v("Date")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tfoot",[a("tr",[a("th",[e._v("User")]),e._v(" "),a("th",[e._v("Name")]),e._v(" "),a("th",[e._v("Key")]),e._v(" "),a("th",[e._v("Old Value")]),e._v(" "),a("th",[e._v("New Value")]),e._v(" "),a("th",[e._v("Date")])])])}]}},502:function(e,t,a){var s=a(16)(a(266),a(267),!1,null,null,null);e.exports=s.exports}});